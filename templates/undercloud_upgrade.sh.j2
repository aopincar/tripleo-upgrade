#!/bin/bash
#
# Perform undercloud upgrade and related steps
set -euo pipefail

sudo yum update -y python-tripleoclient
{% if containerized_undercloud_upgrade|bool %}
# Add --use-heat until it becomes the default, hopefully in Rocky.
openstack undercloud upgrade --use-heat &> undercloud_{{ log_prefix }}.log
{% else %}
openstack undercloud upgrade &> undercloud_{{ log_prefix }}.log
{% endif %}
